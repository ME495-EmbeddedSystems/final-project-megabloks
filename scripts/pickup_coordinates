import rospy

from geometry_msgs.msg import Pose2D
from blocks.srv import GetBlockPosition


# Global variables are bad. This code is just for testing hard coded position
# This will be replaced when computer vision is integrated.
hard_coded_position = [[1, 2, 0],[1,3, 30], [2,3,40],[3,4,75]]
index = 0

def get_block_position(req):
  global index
  index+=1
  if(index > len(hard_coded_position)):
    index=0
  block_pose = Pose2D()
  block_pose.x = hard_coded_position[index][0]
  block_pose.y = hard_coded_position[index][1]
  block_pose.theta = hard_coded_position[index][2]
  return block_pose


def main():
  rospy.init_node('block_position')
  rospy.Service('/blocks/next_pickup', GetBlockPosition, get_block_position)
  rospy.spin()

if __name__=='__main__':
  main()
